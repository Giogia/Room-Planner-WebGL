{"version":3,"file":"analysis-view.js","sourceRoot":"","sources":["../../../../src/test/fidelity/components/analysis-view.ts"],"names":[],"mappings":"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","sourcesContent":["/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport './images-4-up.js';\n\nimport '@polymer/paper-slider';\nimport {html, LitElement, property} from 'lit-element';\n\nimport {AnalysisCompletedMessage, Dimensions, ImageComparisonMessage, ImageComparisonResults} from '../common.js';\nimport {ImageAccessor} from '../image-accessor.js';\n\n\nexport class AnalysisView extends LitElement {\n  @property({type: Object}) leftImage: HTMLImageElement|null = null;\n  @property({type: Object}) rightImage: HTMLImageElement|null = null;\n\n  @property({type: Object}) analysisResult: ImageComparisonResults|null = null;\n\n  @property({type: Object})\n  protected leftImageAccessor: ImageAccessor|null = null;\n  @property({type: Object})\n  protected rightImageAccessor: ImageAccessor|null = null;\n  @property({type: Object})\n  protected blackWhiteImageAccessor: ImageAccessor|null = null;\n  @property({type: Object})\n  protected deltaImageAccessor: ImageAccessor|null = null;\n\n  @property({type: Number}) protected threshold: number = 5;\n\n  protected worker: Worker;\n  protected port: MessagePort;\n\n  constructor() {\n    super();\n\n    const channel = new MessageChannel();\n\n    this.port = channel.port1;\n    this.worker = new Worker('../../dist/image-comparison-worker.js');\n    this.worker.postMessage('connect', [channel.port2]);\n    this.port.onmessage = (event) => this.onMessage(event);\n    this.port.start();\n  }\n\n  onMessage(event: MessageEvent) {\n    const data = event.data as ImageComparisonMessage;\n    const {type} = data;\n\n    switch (type) {\n      case 'analysis-completed':\n\n        this.analysisResult = (data as AnalysisCompletedMessage).result;\n\n        break;\n      default:\n        break;\n    }\n  }\n\n  async connectedCallback() {\n    super.connectedCallback && super.connectedCallback();\n\n    document.body.addEventListener('click', (event) => {\n      const originatingElement = (event as any).path[0] as HTMLElement;\n\n      if (originatingElement.tagName !== 'IMG') {\n        return;\n      }\n\n      if ((originatingElement.parentNode! as HTMLElement)\n              .classList.contains('selected')) {\n        this.deselect(originatingElement as HTMLImageElement);\n      } else {\n        this.select(originatingElement as HTMLImageElement);\n      }\n    });\n\n    await this.updateComplete;\n\n    const candidateCanvas =\n        (this.shadowRoot!.querySelector('canvas[slot=\"top-left\"]')! as any)\n            .transferControlToOffscreen();\n\n    const goldenCanvas =\n        (this.shadowRoot!.querySelector('canvas[slot=\"top-right\"]')! as any)\n            .transferControlToOffscreen();\n    const blackWhiteCanvas =\n        (this.shadowRoot!.querySelector('canvas[slot=\"bottom-left\"]')! as any)\n            .transferControlToOffscreen();\n\n    const deltaCanvas =\n        (this.shadowRoot!.querySelector('canvas[slot=\"bottom-right\"]')! as any)\n            .transferControlToOffscreen();\n\n    this.port.postMessage(\n        {\n          type: 'canvases-ready',\n          candidateCanvas,\n          goldenCanvas,\n          blackWhiteCanvas,\n          deltaCanvas\n        },\n        [candidateCanvas, goldenCanvas, blackWhiteCanvas, deltaCanvas]);\n  }\n\n  get canCompareImages(): boolean {\n    return this.leftImage != null && this.rightImage != null;\n  }\n\n  deselect(element: HTMLImageElement) {\n    if (this.leftImage === element) {\n      this.leftImage = this.rightImage;\n      this.rightImage = null;\n    } else if (this.rightImage === element) {\n      this.rightImage = null;\n    }\n\n    (element.parentNode! as HTMLElement).classList.remove('selected');\n  }\n\n  select(element: HTMLImageElement) {\n    if (this.leftImage == null) {\n      this.leftImage = element;\n    } else if (this.rightImage == null) {\n      this.rightImage = element;\n    } else {\n      return;\n    }\n\n    (element.parentNode! as HTMLElement).classList.add('selected');\n  }\n\n  enterAnalysisView() {\n    if (this.canCompareImages) {\n      this.classList.add('compare');\n    }\n  }\n\n  exitAnalysisView() {\n    this.classList.remove('compare');\n  }\n\n  reset() {\n    if (this.rightImage != null) {\n      this.deselect(this.rightImage);\n    }\n\n    if (this.leftImage != null) {\n      this.deselect(this.leftImage);\n    }\n  }\n\n  get comparisonDimensions(): Dimensions {\n    if (this.canCompareImages) {\n      const width =\n          Math.max(this.leftImage!.naturalWidth, this.rightImage!.naturalWidth);\n      const height = Math.max(\n          this.leftImage!.naturalHeight, this.rightImage!.naturalHeight);\n\n      return {width, height};\n    }\n\n    return {width: 0, height: 0};\n  }\n\n  async updated(changedProperties: Map<string, any>) {\n    super.updated(changedProperties);\n\n    if (changedProperties.has('analysisResult') &&\n        this.analysisResult != null && this.canCompareImages) {\n      const {imageBuffers} = this.analysisResult;\n      const {width, height} = this.comparisonDimensions;\n\n      this.blackWhiteImageAccessor = ImageAccessor.fromArrayBuffer(\n          imageBuffers.blackWhite!, width, height);\n\n      this.deltaImageAccessor =\n          ImageAccessor.fromArrayBuffer(imageBuffers.delta!, width, height);\n    }\n\n    if ((changedProperties.has('leftImage') ||\n         changedProperties.has('rightImage')) &&\n        this.canCompareImages) {\n      this.leftImageAccessor = ImageAccessor.fromImageElement(this.leftImage!);\n      this.rightImageAccessor =\n          ImageAccessor.fromImageElement(this.rightImage!);\n\n      const {width, height} = this.comparisonDimensions;\n      const candidateImageBuffer = this.leftImageAccessor.toArrayBuffer();\n      const goldenImageBuffer = this.rightImageAccessor.toArrayBuffer();\n\n      this.port.postMessage(\n          {\n            type: 'images-assigned',\n            candidateImageBuffer,\n            goldenImageBuffer,\n            dimensions: {width, height}\n          },\n          [\n            candidateImageBuffer as ArrayBuffer,\n            goldenImageBuffer as ArrayBuffer\n          ]);\n\n      this.port.postMessage(\n          {type: 'threshold-changed', threshold: this.threshold});\n    }\n\n    if (changedProperties.has('threshold') && this.canCompareImages) {\n      this.port.postMessage(\n          {type: 'threshold-changed', threshold: this.threshold});\n    }\n  }\n\n  render() {\n    let instructions;\n\n    if (this.canCompareImages) {\n      instructions = html`\n<button @click=\"${() => this.enterAnalysisView()}\">\n  Compare selected images\n</button>\n<button @click=\"${() => this.reset()}\" class=\"no-border\">\n  Clear selections\n</button>`;\n    } else {\n      instructions = html`<p>Select two images to compare them!</p>`;\n    }\n\n    return html`\n<style>\n:host {\n  display: block;\n  position: fixed;\n  width: 100vw;\n  bottom: 0;\n  left: 0;\n\n  font-family: Google Sans, sans-serif;\n  background-color: #37474f;\n  color: #fff;\n\n  box-shadow: 0px 3px 12px rgba(100, 100, 100, 0.3);\n}\n\n#instructions {\n  text-align: center;\n  font-style: italic;\n  padding: 1em;\n}\n\nbutton {\n  font-family: Google Sans, sans-serif;\n  text-transform: uppercase;\n  color: #fff;\n  background-color: #37474f;\n  border: 1px solid #fff;\n  border-radius: 3px;\n  font-size: 1.1em;\n  font-weight: 200;\n  padding: 0.45em 0.85em;\n  cursor: pointer;\n}\n\nbutton {\n  margin: 0.35em 0;\n}\n\nbutton:hover, button:focus {\n  background-color: #62727b;\n}\n\n#comparison {\n  display: flex;\n  position: fixed;\n  flex-direction: column;\n  align-items: stretch;\n  justify-content: center;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  box-sizing: border-box;\n  background-color: #37474f;\n  transform: translateY(1vh);\n  opacity: 0;\n  pointer-events: none;\n  transition: transform 0.3s, opacity 0.3s;\n}\n\n:host(.compare) #comparison {\n  transform: translateY(0);\n  opacity: 1;\n  pointer-events: unset;\n}\n\nbutton.no-border {\n  border: none;\n}\n\n.exit {\n  margin: 0;\n  border: 0;\n  font-size: 0;\n  line-height: 0;\n\n  position: absolute;\n  right: 32px;\n  top: 32px;\n  width: 32px;\n  height: 32px;\n  opacity: 0.75;\n}\n\n.exit:hover {\n  opacity: 1;\n}\n\n.exit:before, .exit:after {\n  content: ' ';\n  position: absolute;\n  top: 0px;\n  left: 15px;\n  height: 33px;\n  width: 2px;\n  background-color: #fff;\n}\n\n.exit:before {\n  transform: rotate(45deg);\n}\n.exit:after {\n  transform: rotate(-45deg);\n}\n\nimages-4-up {\n  flex: 1 1 100%;\n}\n\n#controls {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex: 1 1 90px;\n\n  color: #fff;\n  --primary-text-color: #fff;\n  --paper-slider-active-color: #fff;\n  --paper-slider-pin-color: #fff;\n  --paper-slider-knob-color: #fff;\n  --paper-slider-font-color: #444;\n}\n\ncanvas {\n  width: 100%;\n  height: 100%;\n}\n</style>\n<div id=\"instructions\">\n  ${instructions}\n</div>\n<div id=\"comparison\">\n  <images-4-up .dimensions=\"${this.comparisonDimensions}\"\n      .topLeftImageAccessor=\"${this.leftImageAccessor}\"\n      .topRightImageAccessor=\"${this.rightImageAccessor}\"\n      .bottomLeftImageAccessor=\"${this.blackWhiteImageAccessor}\"\n      .bottomRightImageAccessor=\"${this.deltaImageAccessor}\">\n    <canvas slot=\"top-left\"></canvas>\n    <canvas slot=\"top-right\"></canvas>\n    <canvas slot=\"bottom-left\"></canvas>\n    <canvas slot=\"bottom-right\"></canvas>\n  </images-4-up>\n  <div id=\"controls\">\n    <label id=\"threshold-label\">Threshold</label>\n    <paper-slider\n        @change=\"${\n        (event: Event) => this.threshold =\n            parseInt((event.target as HTMLInputElement).value, 10)}\"\n        aria-labelledby=\"threshold-label\"\n        min=\"0\" max=\"10\" step=\"1\" pin snaps value=\"5\" editable>\n    </paper-slider>\n  </div>\n  <button class=\"exit\" @click=\"${() => this.exitAnalysisView()}\">Exit</button>\n</div>`\n  }\n}\n\ncustomElements.define('analysis-view', AnalysisView);\n"]}