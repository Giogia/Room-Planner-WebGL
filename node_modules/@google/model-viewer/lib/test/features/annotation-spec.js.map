{"version":3,"file":"annotation-spec.js","sourceRoot":"","sources":["../../../src/test/features/annotation-spec.ts"],"names":[],"mappings":"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","sourcesContent":["/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Vector3} from 'three';\n\nimport {AnnotationInterface, AnnotationMixin} from '../../features/annotation';\nimport {Hotspot} from '../../features/annotation/hotspot.js';\nimport ModelViewerElementBase, {$scene, Vector3D} from '../../model-viewer-base';\nimport {ModelScene} from '../../three-components/ModelScene';\nimport {assetPath, rafPasses, timePasses, waitForEvent} from '../helpers';\nimport {BasicSpecTemplate} from '../templates';\n\nconst expect = chai.expect;\n\nconst sceneContainsHotspot =\n    (scene: ModelScene, element: HTMLElement): boolean => {\n      const {children} = scene.pivot;\n      for (let i = 0, l = children.length; i < l; i++) {\n        const hotspot = children[i];\n        if (hotspot instanceof Hotspot &&\n            (hotspot.element.children[0] as HTMLSlotElement).name ===\n                element.slot) {\n          // expect it has been changed from default\n          expect(hotspot.position).to.not.eql(new Vector3());\n          expect(hotspot.normal).to.not.eql(new Vector3(0, 1, 0));\n          return true;\n        }\n      }\n      return false;\n    };\n\nconst closeToVector3 = (a: Vector3D, b: Vector3) => {\n  const delta = 0.001;\n  expect(a.x).to.be.closeTo(b.x, delta);\n  expect(a.y).to.be.closeTo(b.y, delta);\n  expect(a.z).to.be.closeTo(b.z, delta);\n};\n\nsuite('ModelViewerElementBase with AnnotationMixin', () => {\n  let nextId = 0;\n  let tagName: string;\n  let ModelViewerElement:\n      Constructor<ModelViewerElementBase&AnnotationInterface>;\n  let element: ModelViewerElementBase&AnnotationInterface;\n  let scene: ModelScene;\n\n  setup(() => {\n    tagName = `model-viewer-annotation-${nextId++}`;\n    ModelViewerElement = class extends AnnotationMixin\n    (ModelViewerElementBase) {\n      static get is() {\n        return tagName;\n      }\n    };\n    customElements.define(tagName, ModelViewerElement);\n    element = new ModelViewerElement();\n    document.body.appendChild(element);\n    scene = element[$scene];\n  });\n\n  teardown(() => {\n    if (element.parentNode != null) {\n      element.parentNode.removeChild(element);\n    }\n  });\n\n  BasicSpecTemplate(() => ModelViewerElement, () => tagName);\n\n  suite('a model-viewer element with a hotspot', () => {\n    let hotspot: HTMLElement;\n    let numSlots: number;\n\n    setup(async () => {\n      hotspot = document.createElement('div');\n      hotspot.setAttribute('slot', 'hotspot-1');\n      hotspot.setAttribute('data-position', '1m 1m 1m');\n      hotspot.setAttribute('data-normal', '0m 0m 1m');\n      element.appendChild(hotspot);\n      await timePasses();\n      numSlots = scene.pivot.children.length;\n    });\n\n    test('creates a corresponding slot', () => {\n      expect(sceneContainsHotspot(scene, hotspot)).to.be.true;\n    });\n\n    suite('adding a second hotspot with the same name', () => {\n      let hotspot2: HTMLElement;\n\n      setup(async () => {\n        hotspot2 = document.createElement('div');\n        hotspot2.setAttribute('slot', 'hotspot-1');\n        hotspot2.setAttribute('data-position', '0m 1m 2m');\n        hotspot2.setAttribute('data-normal', '1m 0m 0m');\n        element.appendChild(hotspot2);\n        await timePasses();\n      });\n\n      test('does not change the slot', () => {\n        expect(scene.pivot.children.length).to.be.equal(numSlots);\n      });\n\n      test('does not change the data', () => {\n        const {position, normal} =\n            (scene.pivot.children[numSlots - 1] as Hotspot);\n        expect(position).to.be.deep.equal(new Vector3(1, 1, 1));\n        expect(normal).to.be.deep.equal(new Vector3(0, 0, 1));\n      });\n\n      test('updateHotspot does change the data', () => {\n        element.updateHotspot(\n            {name: 'hotspot-1', position: '0m 1m 2m', normal: '1m 0m 0m'});\n        const {position, normal} =\n            (scene.pivot.children[numSlots - 1] as Hotspot);\n        expect(position).to.be.deep.equal(new Vector3(0, 1, 2));\n        expect(normal).to.be.deep.equal(new Vector3(1, 0, 0));\n      });\n\n      suite('with a camera', () => {\n        let wrapper: HTMLElement;\n\n        setup(async () => {\n          const hotspotObject2D = scene.pivot.children[numSlots - 1] as Hotspot;\n          hotspotObject2D.hide();\n\n          await rafPasses();\n\n          const camera = element[$scene].getCamera();\n          camera.position.z = 2;\n          camera.updateMatrixWorld();\n\n          wrapper = hotspotObject2D.element;\n        });\n\n        test('the hotspot is visible', async () => {\n          await waitForEvent(hotspot2, 'hotspot-visibility');\n          expect(wrapper.classList.contains('hide')).to.be.false;\n        });\n\n        test('the hotspot is hidden after turning', async () => {\n          await waitForEvent(hotspot2, 'hotspot-visibility');\n\n          element[$scene].setPivotRotation(Math.PI);\n          element[$scene].updateMatrixWorld();\n\n          await waitForEvent(hotspot2, 'hotspot-visibility');\n\n          expect(!!wrapper.classList.contains('hide')).to.be.true;\n        });\n      });\n\n      test('and removing it does not remove the slot', async () => {\n        element.removeChild(hotspot);\n        await timePasses();\n\n        expect(scene.pivot.children.length).to.be.equal(numSlots);\n      });\n\n      test('but removing both does remove the slot', async () => {\n        element.removeChild(hotspot);\n        element.removeChild(hotspot2);\n        await timePasses();\n\n        expect(scene.pivot.children.length).to.be.equal(numSlots - 1);\n      });\n    });\n  });\n\n  suite('a model-viewer element with a loaded cube', () => {\n    let width = 0;\n    let height = 0;\n\n    setup(async () => {\n      width = 200;\n      height = 300;\n      element.setAttribute('style', `width: ${width}px; height: ${height}px`);\n      element.src = assetPath('models/cube.gltf');\n\n      const camera = element[$scene].getCamera();\n      camera.position.z = 2;\n      camera.updateMatrixWorld();\n      await waitForEvent(element, 'load');\n    });\n\n    test('gets expected hit result', () => {\n      const {position, normal} =\n          element.positionAndNormalFromPoint(width / 2, height / 2)!;\n      closeToVector3(position!, new Vector3(0, 0, 0.5));\n      closeToVector3(normal!, new Vector3(0, 0, 1));\n    });\n\n    test('gets expected hit result when turned', () => {\n      element[$scene].setPivotRotation(-Math.PI / 2);\n      element[$scene].updateMatrixWorld();\n      const {position, normal} =\n          element.positionAndNormalFromPoint(width / 2, height / 2)!;\n      closeToVector3(position!, new Vector3(0.5, 0, 0));\n      closeToVector3(normal!, new Vector3(1, 0, 0));\n    });\n  });\n});"]}